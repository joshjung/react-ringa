!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["React Ringa"]=t():e["React Ringa"]=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=4)}([function(e,t,n){"use strict";function o(e){e.__ringaStateQueueTimeout&&(clearTimeout(e.__ringaStateQueueTimeout),delete e.__ringaStateQueueTimeout)}function r(e,t){return e.state?(e.__ringaStateQueue=e.__ringaStateQueue||{},e.__ringaStateQueue=Object.assign(e.__ringaStateQueue,t),void(e.__ringaStateQueueTimeout||(e.__ringaStateQueueTimeout=setTimeout(function(){e.__ringaStateQueueTimeout=0,e.setState(e.__ringaStateQueue),delete e.__ringaStateQueue},0)))):void(e.state=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.unqueueState=o,t.queueState=r},function(e,t,n){"use strict";function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.refName,r=void 0===o?"ringaComponent":o,a=n.callback,i=void 0===a?void 0:a,c=void 0;e.componentDidMount&&(c=e.componentDidMount.bind(e)),e.$ringaControllers=e.$ringaControllers||[],e.$ringaControllers.push(t),e.componentDidMount=function(){return e.refs&&e.refs[r]?(t.bus=e.refs[r],c&&c(),void(i&&i())):void console.warn("attach(): Error attaching Ringa Controller to React Component "+e.constructor.name+". Component reference named '"+r+"' does not exist.")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";function o(e,t){var n=[];for(e._reactInternalInstance&&(n.push(e),e=e._reactInternalInstance);e;){n.push(e),e._reactInternalInstance&&(e=e._reactInternalInstance);try{e=e._currentElement._owner._instance}catch(t){e=null}}return n.forEach(t),n}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{classOrId:e,propertyPath:t,setOnState:n,setOnComponent:o}}function a(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=i(e),r=0;r<o.length;r++){var a=o[r],c=a.modelWatcher;if(c){var u=c.find(t,n);if(u)return u}}return null}function i(e){var t=[];return o(e,function(e){e.$ringaControllers&&e.$ringaControllers.length&&(t=t.concat(e.$ringaControllers))}),t}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=void 0,r=void 0;e.componentWillMount&&(o=e.componentWillMount.bind(e)),e.componentWillUnmount&&(r=e.componentWillUnmount.bind(e)),void 0===e.state&&(e.state={});var a=void 0,c=[];e.componentWillUnmount=function(){(0,d.unqueueState)(e),c.forEach(function(e){e.mw.unwatch(e.classOrId,e.propertyPath,e.changeHandler)}),r&&r()},e.componentWillMount=function(){return a=i(e),a.length?(t=t instanceof Array?t:[t],t.forEach(function(t){var o=[];a.forEach(function(r){var a=r.modelWatcher;if(a){var i=function(){var r=a.find(t.classOrId);if(!r)return{v:void 0};o.push(r),o.length>1&&console.warn("depend(): found two models while looking for a dependency on '"+e.constructor.name+"'! Watch is:\n",t,"found these models:\n",o,"depend() looks for the closest model it can find that matches the watch criteria. This means you might have a serious error in your stack. Proceeding as normal.");var i={};i[t.setProperty||r.name]=r,(0,d.queueState)(e,i);var u=void 0,l=void 0;if(t.propertyPath){var s=t.propertyPath instanceof Array?t.propertyPath:[t.propertyPath];l=function(t,o){var r=n?n(o):void 0;void 0===r&&t.setOnState&&!function(){var n={};o.forEach(function(e){var o={},r=e.model.name;if(t.setProperty&&(r=t.setProperty),e.watchedPath)try{var a=e.watchedPath.split(".");r=a[a.length-1]}catch(t){console.error("depend(): property was updated but watched path was invalid. watchedPath was:",e.watchedPath)}o[r]=e.watchedValue,n=Object.assign(n,o)}),(0,d.queueState)(e,n)}()}.bind(void 0,t),s.forEach(function(e){u=a.find(t.classOrId,e),c.push({mw:a,classOrId:t.classOrId,propertyPath:e,changeHandler:l}),a.watch(t.classOrId,e,l),l&&l([{model:r,value:u,watchedPath:e,watchedValue:u}])})}}();if("object"===("undefined"==typeof i?"undefined":u(i)))return i.v}}),o.length||console.error("depend(): could not find the model",t.classOrId.name,"in any ancestor Controllers of React component",e.constructor.name,e,"during the componentDidMount() phase. Found these instantiated and attached controllers",a)}),void(o&&o())):void console.error("react-ringa depend(): could not find any Ringa Controllers in the ancestors of "+e.constructor.name+", the following dependencies will NOT work: ",t,e)}}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.walkReactParents=o,t.dependency=r,t.find=a,t.getAllListeningControllers=i,t.depend=c;var d=n(0)},function(e,t,n){"use strict";function o(e,t,n){t&&!function(){if(!t.watch)throw new Error("react-ringa watch(): the provided object is not a Ringa Model '"+t+"'");var o=e.componentWillUnmount?e.componentWillUnmount.bind(e):void 0;e.componentWillUnmount=function(){(0,r.unqueueState)(e),o&&o()},t.watch(function(o){var a=void 0;if(n&&(a=n.apply(void 0,[o])),void 0===a){var i={};i[t.name]=t,(0,r.queueState)(e,i)}});var a={};a[t.name]=t,(0,r.queueState)(e,a)}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(0)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.watch=t.getAllListeningControllers=t.find=t.walkReactParents=t.dependency=t.depend=t.attach=void 0;var r=n(1),a=o(r),i=n(3),c=o(i),u=n(2);t.attach=a.default,t.depend=u.depend,t.dependency=u.dependency,t.walkReactParents=u.walkReactParents,t.find=u.find,t.getAllListeningControllers=u.getAllListeningControllers,t.watch=c.default,t.default={attach:a.default,depend:u.depend,dependency:u.dependency,walkReactParents:u.walkReactParents,find:u.find,getAllListeningControllers:u.getAllListeningControllers,watch:c.default}}])});
//# sourceMappingURL=react-ringa.min.js.map
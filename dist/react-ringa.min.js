!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["React Ringa"]=n():e["React Ringa"]=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="/",n(n.s=5)}([function(e,n,t){"use strict";function o(e){for(;e;){for(var n in e)if(n.startsWith("__reactInternalInstance$"))return e[n]._currentElement._owner._instance;e=e.parentNode}return null}function r(e){for(;e;){for(var n in e)if(n.startsWith("__reactInternalInstance$"))return e;e=e.parentNode}return null}function a(e,n){var t=[];for(e=e._reactInternalInstance;e;)if(e._instance||e._currentElement._owner){var o=e._instance||e._currentElement._owner._instance;-1===t.indexOf(o)&&t.push(o),e=e._hostParent}else e=e._hostParent,console.log("Walking up ReactDomComponents",e);return n&&t.forEach(n),t}function i(e){return a(e)}function d(e){var n=[],t=[];return a(e,function(e){t.push(e),e.$ringaControllers&&e.$ringaControllers.length&&(n=n.concat(e.$ringaControllers))}),n}function u(e,n){var t=void 0;return e.refs&&e.refs[n]?t=e.refs[n]:(t=l.default.findDOMNode(e),t||console.warn("attach(): Error finding root DOM node for React Component "+e.constructor.name+". Component ref named '"+n+"' does not exist and ReactDOM findDomNode(component) did not return anything. This can happen if the render() method returns null or undefined."),t)}Object.defineProperty(n,"__esModule",{value:!0}),n.domNodeToNearestReactComponent=o,n.domNodeToNearestReactComponentDomNode=r,n.walkReactParents=a,n.getAllReactComponentAncestors=i,n.getAllListeningControllers=d,n.findComponentRoot=u;var c=t(!function(){var e=new Error('Cannot find module "react-dom"');throw e.code="MODULE_NOT_FOUND",e}()),l=function(e){return e&&e.__esModule?e:{default:e}}(c)},function(e,n,t){"use strict";function o(e){e.__ringaStateQueueTimeout&&(clearTimeout(e.__ringaStateQueueTimeout),delete e.__ringaStateQueueTimeout),delete e.__ringaStateQueue}function r(e,n){return e.state?e.updater.isMounted(e)?(e.__ringaStateQueue=e.__ringaStateQueue||{},e.__ringaStateQueue=Object.assign(e.__ringaStateQueue,n),void(e.__ringaStateQueueTimeout||(e.__ringaStateQueueTimeout=setTimeout(function(){e.__ringaStateQueueTimeout=0,e.setState(e.__ringaStateQueue),delete e.__ringaStateQueue},0)))):void(e.state=Object.assign(n,e.state)):void(e.state=n)}Object.defineProperty(n,"__esModule",{value:!0}),n.unqueueState=o,n.queueState=r;var a=t(!function(){var e=new Error('Cannot find module "react-dom"');throw e.code="MODULE_NOT_FOUND",e}());!function(e){e&&e.__esModule}(a)},function(e,n,t){"use strict";function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.refName,a=void 0===o?"ringaRoot":o,i=t.callback,d=void 0===i?void 0:i,u=t.bus,c=void 0===u?void 0:u,l=void 0,s=void 0;e.componentDidMount&&(l=e.componentDidMount.bind(e)),e.componentWillUnmount&&(s=e.componentWillUnmount.bind(e)),e.$ringaControllers=e.$ringaControllers||[],e.$ringaControllers.push(n),e.componentDidMount=function(){var t=(0,r.findComponentRoot)(e,a);c?n.bus=c:t?(t.$ringaControllers=t.$ringaControllers||[],t.$ringaControllers.push(n),n.bus=t):console.warn("attach(): could not find domNode to set as bus for controller "+n),l&&l(),d&&d()},e.componentWillUnmount=function(){var t=(0,r.findComponentRoot)(e,a),o=void 0;t&&(o=t.$ringaControllers.indexOf(n),t.$ringaControllers.splice(o,1)),o=e.$ringaControllers.indexOf(n),e.$ringaControllers.splice(o,1),s&&s()}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r=t(0)},function(e,n,t){"use strict";function o(e){return{classOrId:e,propertyPath:arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,setOnState:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],setOnComponent:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function r(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=(0,d.getAllListeningControllers)(e),r=0;r<o.length;r++){var a=o[r],i=a.modelWatcher;if(i){var u=i.find(n,t);if(u)return u}}return null}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],void 0),r=void 0;e.componentWillMount&&(o=e.componentWillMount.bind(e)),e.componentWillUnmount&&(r=e.componentWillUnmount.bind(e)),void 0===e.state&&(e.state={});var a=void 0,u=[];e.componentWillUnmount=function(){(0,i.unqueueState)(e),u.forEach(function(e){e.mw.unwatch(e.classOrId,e.propertyPath,e.changeHandler)}),r&&r()},e.componentWillMount=function(){if(a=(0,d.getAllListeningControllers)(e),!a.length)return void console.error("react-ringa depend(): could not find any Ringa Controllers in the ancestors of "+e.constructor.name+", the following dependencies will NOT work: ",n,e);n=n instanceof Array?n:[n],n.forEach(function(n){var o=[];a.forEach(function(r){var a=r.modelWatcher;if(a){var d=a.find(n.classOrId);if(!d)return;if(o.push(d),o.length>1)return void console.warn("depend(): found two models while looking for a dependency on '"+e.constructor.name+"'! Watch is:\n",n,"found these models:\n",o,"depend() looks for the closest model it can find that matches the watch criteria. This means you might have a serious error in your stack. Proceeding as normal.");var c={};c[n.setProperty||d.name]=d,(0,i.queueState)(e,c);var l=void 0,s=void 0;if(n.propertyPath){var f=n.propertyPath instanceof Array?n.propertyPath:[n.propertyPath];s=function(n,o){if(void 0===(t?t(o):void 0)&&n.setOnState){var r={};o.forEach(function(e){var t={},o=e.watchedModel.name;if(n.setProperty)o=n.setProperty;else if(e.watchedPath){var a=e.watchedPath.split(".");o=a[a.length-1]}t[o]=e.watchedValue,r=Object.assign(r,t)}),(0,i.queueState)(e,r)}}.bind(void 0,n),f.forEach(function(e){l=a.find(n.classOrId,e),u.push({mw:a,classOrId:n.classOrId,propertyPath:e,changeHandler:s}),a.watch(n.classOrId,e,s),s&&s([{watchedModel:d,signalValue:l,watchedPath:e,watchedValue:l}])})}}}),o.length||console.error("depend(): could not find the model",n.classOrId.name,"in any ancestor Controllers of React component",e.constructor.name,e,"during the componentDidMount() phase. Found these instantiated and attached controllers",a)}),o&&o()}}Object.defineProperty(n,"__esModule",{value:!0}),n.dependency=o,n.find=r,n.depend=a;var i=t(1),d=t(0)},function(e,n,t){"use strict";function o(e,n,t){if(n){if(!n.watch)throw new Error("react-ringa watch(): the provided object is not a Ringa Model '"+n+"'");var o=e.componentWillUnmount?e.componentWillUnmount.bind(e):void 0;e.$watches=e.$watches||{};var a=e.$watches[n.id];a&&n.unwatch(a);var i=e.$watches[n.id]=function(o,a,i,d,u){var c=void 0;if(t&&(c=t.apply(void 0,[o,a,i,d,u])),void 0===c){var l={};l[n.name]=n,(0,r.queueState)(e,l)}},d=function(){(0,r.unqueueState)(e),n.unwatch(i)};e.componentWillUnmount=function(){d(),o&&o()},n.watch(i);var u={};return u[n.name]=n,(0,r.queueState)(e,u),d}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r=t(1)},function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.domNodeToNearestReactComponentDomNode=n.domNodeToNearestReactComponent=n.watch=n.getAllListeningControllers=n.find=n.walkReactParents=n.dependency=n.depend=n.attach=void 0;var r=t(2),a=o(r),i=t(4),d=o(i),u=t(3),c=t(0);n.attach=a.default,n.depend=u.depend,n.dependency=u.dependency,n.walkReactParents=c.walkReactParents,n.find=u.find,n.getAllListeningControllers=c.getAllListeningControllers,n.watch=d.default,n.domNodeToNearestReactComponent=c.domNodeToNearestReactComponent,n.domNodeToNearestReactComponentDomNode=c.domNodeToNearestReactComponentDomNode,n.default={attach:a.default,depend:u.depend,dependency:u.dependency,walkReactParents:c.walkReactParents,find:u.find,getAllListeningControllers:c.getAllListeningControllers,watch:d.default}}])});
//# sourceMappingURL=react-ringa.min.js.map